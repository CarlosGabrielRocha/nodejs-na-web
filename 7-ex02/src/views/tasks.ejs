<!DOCTYPE html>
<html lang="pt-br" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Tarefas</title>
</head>

<body class="d-flex flex-column align-items-center justify-content-between min-vw-100 min-vh-100 overflow-x-hidden">
    <%- include('partials/header') %> 

    <div class="container d-flex flex-column gap-3" style="margin-bottom: 18rem;">
        <h1>
            <%= list.name %>
        </h1>
        <form class="d-flex align-items-center justify-content-between" action="/app/lists/<%= list.id %>/new-task" method="post">
            <input class="form-control" type="text" name="new-task" id="new-task" placeholder="Adicionar nova tarefa...">
            <button class="btn btn-outline-primary" type="submit">Adicionar</button>
        </form>


        <div class="d-flex flex-column gap-3">
            <% tasks.forEach(task => { %>

                <% if (task.completed) { %>
                    <div class="d-flex align-items-center justify-content-between bg-success form-control">
                        <span>
                            <%= task.desc %>
                        </span>
                    </div>

                <% } else { %>           
                    <form class="d-flex align-items-center justify-content-between form-control" method="post" action="/app/lists/<%= list.id %>/complete/<%= task.id %>">
                        <span>
                            <%= task.desc %>
                        </span>
                        <button class="btn btn-success" type="submit">Completar</button>
                    </form>
                <% } %>
            <% }) %>
        </div>
    </div>

    <%- include('partials/footer') %>
</body>

</html>